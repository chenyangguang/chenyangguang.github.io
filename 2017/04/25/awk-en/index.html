<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chenyangguang.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.27.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Awk&#39;s Origin - Starting with a Beauty Choosing a Boyfriend Speaking of Swiss Army knives, many people are probably tired of hearing it. Some say Emacs is a Swiss Army knife, some say Vim is also a Swi">
<meta property="og:type" content="article">
<meta property="og:title" content="Swiss Army Knife Blade - awk">
<meta property="og:url" content="https://chenyangguang.github.io/2017/04/25/awk-en/index.html">
<meta property="og:site_name" content="重剑无锋">
<meta property="og:description" content="Awk&#39;s Origin - Starting with a Beauty Choosing a Boyfriend Speaking of Swiss Army knives, many people are probably tired of hearing it. Some say Emacs is a Swiss Army knife, some say Vim is also a Swi">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-24T16:00:00.000Z">
<meta property="article:modified_time" content="2026-02-08T20:54:46.645Z">
<meta property="article:author" content="Gitvim">
<meta property="article:tag" content="Tips">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://chenyangguang.github.io/2017/04/25/awk-en/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://chenyangguang.github.io/2017/04/25/awk-en/","path":"2017/04/25/awk-en/","title":"Swiss Army Knife Blade - awk"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Swiss Army Knife Blade - awk | 重剑无锋</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">重剑无锋</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gitvim</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">84</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://chenyangguang.github.io/2017/04/25/awk-en/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Gitvim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="重剑无锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Swiss Army Knife Blade - awk | 重剑无锋">
      <meta itemprop="description" content="Awk&#39;s Origin - Starting with a Beauty Choosing a Boyfriend Speaking of Swiss Army knives, many people are probably tired of hearing it. Some say Emacs is a Swiss Army knife, some say Vim is also a Swiss Army knife, some say Python is a Swiss Army knife. But let&#39;s temporarily put aside our interest in Swiss Army knives and play with a small Swiss Army knife blade - awk. This little guy is a petite, special programming language.">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Swiss Army Knife Blade - awk
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-04-25 00:00:00" itemprop="dateCreated datePublished" datetime="2017-04-25T00:00:00+08:00">2017-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2026-02-09 04:54:46" itemprop="dateModified" datetime="2026-02-09T04:54:46+08:00">2026-02-09</time>
    </span>

  
</div>

            <div class="post-description">Awk's Origin - Starting with a Beauty Choosing a Boyfriend Speaking of Swiss Army knives, many people are probably tired of hearing it. Some say Emacs is a Swiss Army knife, some say Vim is also a Swiss Army knife, some say Python is a Swiss Army knife. But let's temporarily put aside our interest in Swiss Army knives and play with a small Swiss Army knife blade - awk. This little guy is a petite, special programming language.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><a href="#Awk's-Origin---Starting-with-a-Beauty-Choosing-a-Boyfriend"></a>Awk’s Origin - Starting with a Beauty Choosing a Boyfriend<br>Speaking of Swiss Army knives, many people are probably tired of hearing it. Some say Emacs is a Swiss Army knife, some say Vim is also a Swiss Army knife, some say Python is a Swiss Army knife. But let’s temporarily put aside our interest in Swiss Army knives and play with a small Swiss Army knife blade - awk. This little guy is a petite, special programming language.</p>
<p>I can’t help it, I’ve summarized the best way to get to know new things: charge straight at it.<br>Look at this set of blind date data gfs.data:</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>Li 65 177 10000<br>Wang 77 180 8000<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>This small dataset contains several fields: name, weight, height, monthly income. For example, if a beauty needs to choose a boyfriend standard from here, how to select the tall, rich, handsome men with height above 177?</p>
<p>1<br>2<br>3<br>4<br>5<br>➜  tmp awk ‘ $3 &gt; 177 { print $1,$3}’ gfs.data<br>Wang 180<br>Niu 199<br>Ouyang 200<br>Liu 182</p>
<p>tmp is a temporary directory, this is a short path in zsh, ignore it. The awk program structure is pattern { action }.<br>It defaults to treating fields as sequences of non-whitespace characters. (So you see those quiet spaces in the middle are treated as air.) The rest, the first field name is $1, the second field weight is $2, 177, 180, 199, 168, 200, 182 these height values are $3, and so on. The entire line is $0. Everyone’s looks and assets may be different, meaning the length of $n values is not necessarily consistent.</p>
<p>The single-quoted $3 &gt; 177 is the condition for matching each line scan. When scanning to Wang, obviously this guy’s 180 exceeds the expected value, need to look a few more times to see if he’s a “true destined one” with compatible “ba zi” (eight characters), so he’s selected. Following this pattern to search to the last line, Liu this buddy also won the lottery.<br>If this beauty has high standards and has many conditions for choosing a boyfriend, such as high income, well-proportioned weight, high IQ, etc., it’s best to write her conditions into a file, named: conditions.data. Select her ideal husband at once.</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">awk</span> -f conditions.<span class="class"><span class="keyword">data</span> gfs.<span class="keyword">data</span></span></span><br></pre></td></tr></table></figure>

<p>-f means extracting the program from a file. This standard can be referenced by multiple girls. Choose, not selected? Don’t want, selected? Want! Choose… choose… mass selection!</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f progfile optional <span class="built_in">list</span> <span class="keyword">of</span> files</span><br></pre></td></tr></table></figure>

<p>So when there are many selection conditions and you don’t want to list them one by one, how do you give a range to the dating agency? Use the field count NF. NF is a built-in variable in Awk that stores and calculates the number of fields in the current line.</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk  ‘{ print NF, $1, $NF }’ gfs.data<br>4 Li 10000<br>4 Wang 8000<br>4 Niu 20000<br>4 Chen 5000<br>4 Ouyang 12000<br>4 Liu 9999</p>
<p>This prints out the number of inspection conditions, name, and monthly income for each boy. Take these conditions directly to cast a net.</p>
<p>Print the blind date order NR of the true destined one, also a built-in variable, is the count of lines read so far, here it’s the number of blind dates (assuming this girl changes partners each time).</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{print NR, $0}’  gfs.data<br>1 Li 65 177 10000<br>2 Wang 77 180 8000<br>3 Niu 60 199  20000<br>4 Chen 64.5 168 5000<br>5 Ouyang 80 200 12000<br>6 Liu 72.5 182 9999</p>
<p>What about these conditions?</p>
<p>1<br>2<br>3<br>➜  tmp awk ‘$4 &gt; 10000 {print “Very rich person:”, $1, “ Monthly income:”, $4 }’ gfs.data<br>Very rich person: Niu  Monthly income: 20000<br>Very rich person: Ouyang  Monthly income: 12000</p>
<p>Too many people, salary digits are hard to compare, after all there are too many zeros! Filter and format it, how to do it? printf(format, val_1, val_2, val_3, …, val_n),</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{printf(“%-8s’s monthly salary is ￥%10.2f\n”, $1,$4)}’ gfs.data<br>Li     ‘s monthly salary is ￥  10000.00<br>Wang    ‘s monthly salary is ￥   8000.00<br>Niu     ‘s monthly salary is ￥  20000.00<br>Chen    ‘s monthly salary is ￥   5000.00<br>Ouyang  ‘s monthly salary is ￥  12000.00<br>Liu     ‘s monthly salary is ￥   9999.00</p>
<p>Oh, still can’t see clearly who is a high-quality male. Come, sort their salary levels. Salary goes low, people go high! Use the pipe command sort.</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{printf(“ %10.2f %s\n”, $4, $0)}’ gfs.data | sort -n<br>    5000.00 Chen 64.5 168 5000<br>    8000.00 Wang 77 180 8000<br>    9999.00 Liu 72.5 182 9999<br>   10000.00 Li 65 177 10000<br>   12000.00 Ouyang 80 200 12000<br>   20000.00 Niu 60 199  20000</p>
<p>So Brother Niu is the most “promising” in terms of money here! Since three people have ten-thousand-level salaries, let’s lock them in first. After all, who would have trouble with money? But you can’t just look at wages. What if this person is Wu Dalang or what if he’s √2? No, be more cautious, start high and go low, those above 190 can pass the eye test. When they grow up, they can play volleyball like Lang Ping and Zhu Ting, or maybe produce a little Yao Ming? Add more conditions: AND, OR and NOT, using &amp;&amp;, || and !</p>
<p>1<br>2<br>3<br>➜  tmp awk ‘$4 &gt;=10000 &amp;&amp; $3 &gt; 190 { print $0}’ gfs.data<br>Niu 60 199  20000<br>Ouyang 80 200 12000</p>
<p>This output lacks a conspicuous title. Maybe some girl will mistake weight for waist circumference? To avoid unnecessary misunderstandings, let’s add a header.<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>➜  tmp awk ‘BEGIN {print “Name Weight Height Salary”; print “”}{print($0)}’ gfs.data<br>Name Weight Height Salary</p>
<p>Li 65 177 10000<br>Wang 77 180 8000<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>Oh, arrived at the meeting place early, nothing to do. Maybe compare these people’s average wages?</p>
<p>1<br>2<br>3<br>4<br>➜  tmp awk ‘{salary = salary + $4} END {print NR, “ people”;  print “Total monthly salary:”, salary; print “Average monthly salary:”, salary/NR}’ gfs.data<br>6 people<br>Total monthly salary: 64999<br>Average monthly salary: 10833.2</p>
<p>Not bad! The people haven’t arrived yet. Can all the blind date names be combined into a poem?</p>
<p>1<br>2<br>➜  tmp awk ‘{names = names $1 “ “} END {print names }’  gfs.data<br>Li Wang Niu Chen Ouyang Liu</p>
<p>Well, no. How many strokes in these names? Ah no, how many letters are they composed of?</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘ {print $1, length($1) } ‘ gfs.data<br>Li 2<br>Wang 4<br>Niu 3<br>Chen 4<br>Ouyang 6<br>Liu 3</p>
<p><a href="#Knife-Flow"></a>Knife Flow<br>if-else filter</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘$4 &gt; 10000 {n =  n + 1; salary = salary + $4 }{ if (n &gt; 0 &amp;&amp; $4 &gt; 10000)  print $1, “You have a chance”; else {print $1, “You’re out”} }’ gfs.data<br>Li You’re out<br>Wang You’re out<br>Niu You have a chance<br>Chen You’re out<br>Ouyang You have a chance<br>Liu You’re out</p>
<p>while loop, comb through from the beginning<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>awk ‘{ line[NR] = $0 } END { i = NR ;while (i&gt;0) { print line[i]; i = i - 1 }} ‘ gfs.data<br>Liu 72.5 182 9999<br>Ouyang 80 200 12000<br>Chen 64.5 168 5000<br>Niu 60 199  20000<br>Wang 77 180 8000<br>Li 65 177 10000</p>
<p>for nine returns to one<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>➜  tmp awk ‘BEGIN {for (i=1; i &lt;=9; ++i) print i}’<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9</p>
<p><a href="#Practical-%22Slicer-Style%22"></a>Practical “Slicer Style”<br>Total number of input lines</p>
<p>1<br>2<br>➜  tmp awk ‘END { print NR}’ gfs.data<br>6</p>
<p>Print the fourth line</p>
<p>1<br>2<br>➜  tmp awk ‘ NR == 4 ‘ gfs.data<br>Chen 64.5 168 5000</p>
<p>Output the last field of each line</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘ {print $NF}’ gfs.data<br>10000<br>8000<br>20000<br>5000<br>12000<br>9999</p>
<p>Print the last field of the last line</p>
<p>1<br>2<br>➜  tmp awk ‘{field = $NF} END { print field }’  gfs.data<br>9999</p>
<p>Print input lines with more than 3 fields</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘NF&gt;3’ gfs.data<br>Li 65 177 10000<br>Wang 77 180 8000<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>Print input lines where the last field value is greater than 10000</p>
<p>1<br>2<br>3<br>➜  tmp awk ‘$NF &gt; 10000 ‘ gfs.data<br>Niu 60 199  20000<br>Ouyang 80 200 12000</p>
<p>Print the sum of field counts of all input lines</p>
<p>1<br>2<br>➜  tmp awk ‘ {nf = nf + NF} END {print nf} ‘ gfs.data<br>24</p>
<p>Print the count of lines containing /Niu/</p>
<p>1<br>2<br>➜  tmp awk ‘ /Niu/ {nlines = nlines + 1} END {print nlines}’ gfs.data<br>1</p>
<p>Print the 4th field with maximum value, and the line containing it (assuming $1 is always positive)</p>
<p>1<br>2<br>➜  tmp awk ‘$4 &gt; max { max=$4; maxline=$0 } END { print max, maxline }’ gfs.data<br>20000 Niu 60 199  20000</p>
<p>Print lines that contain at least one field</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘NF &gt; 0’ gfs.data<br>Li 65 177 10000<br>Wang 77 180 8000<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>Print lines longer than 20 characters<br>1<br>2<br>3<br>4<br>5<br>➜  tmp awk ‘length($0) &gt; 16’ gfs.data<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>Add the field count to the beginning of each line<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{print NF, $0}’  gfs.data<br>4 Li 65 177 10000<br>4 Wang 77 180 8000<br>4 Niu 60 199  20000<br>4 Chen 64.5 168 5000<br>4 Ouyang 80 200 12000<br>4 Liu 72.5 182 9999</p>
<p>Print the second and first fields of each line</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{print $2, $1}’ gfs.data<br>65 Li<br>77 Wang<br>60 Niu<br>64.5 Chen<br>80 Ouyang<br>72.5 Liu</p>
<p>Swap a field and print the entire line</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{tmp = $1; $1 = $2; $2 = tmp; print}’ gfs.data<br>65 Li 177 10000<br>77 Wang 180 8000<br>60 Niu 199 20000<br>64.5 Chen 168 5000<br>80 Ouyang 200 12000<br>72.5 Liu 182 9999</p>
<p>Replace the first field of each line with the line number</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk  ‘{$1 = NR; print}’ gfs.data<br>1 65 177 10000<br>2 77 180 8000<br>3 60 199 20000<br>4 64.5 168 5000<br>5 80 200 12000<br>6 72.5 182 9999</p>
<p>Print lines with the second field deleted</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{$2 == “”; print}’ gfs.data<br>Li 65 177 10000<br>Wang 77 180 8000<br>Niu 60 199  20000<br>Chen 64.5 168 5000<br>Ouyang 80 200 12000<br>Liu 72.5 182 9999</p>
<p>Print fields of each line in reverse order</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{ for (i=NF; i &gt; 0; i= i-1) {printf(“%s “, $i)} printf(“\n”)}’ gfs.data<br>10000 177 65 Li<br>8000 180 77 Wang<br>20000 199 60 Niu<br>5000 168 64.5 Chen<br>12000 200 80 Ouyang<br>9999 182 72.5 Liu</p>
<p>Print the sum of all field values of each line</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>➜  tmp awk ‘{sum = 0; for (i=1; i &lt;=NF; i=i+1) {sum = sum + $i} print sum }’ gfs.data<br>10242<br>8257<br>20259<br>5232.5<br>12280<br>10253.5</p>
<p>Accumulate all field values of all lines</p>
<p>1<br>2<br>➜  tmp awk  ‘{for (i=1; i&lt;=NF; ++i) sum += $i} END {print sum}’ gfs.data<br>66524</p>
<p>Absolute values of all field values of all lines</p>
<p>1<br>2<br>3<br>➜  tmp awk  ‘{for (i=1; i&lt;=NF; ++i) if ($i &lt; 0) {$i = -$i} print }’<br>Li -65 -177 18000 # Here manually enter values with negative numbers<br>Li 65 177 18000 # Return</p>
<p><a href="#Awk-Language-Radishes-and-Cabbage"></a>Awk Language Radishes and Cabbage<br>Enter a file called radish.data. This file is basically like this. This section will use this radish and cabbage to stir-fry with fish and meat.<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>➜  tmp awk ‘BEGIN {print “Name       Weight Unit Price Category\n”} {printf(“%-10s %6.2f %2.2f %-1s\n”, $1, $2, $3, $4)}’ radish.data<br>Name       Weight Unit Price Category</p>
<p>Fish        30.00 8.50 Meat<br>Radish      14.00 1.20 Vegetables<br>Cabbage     24.00 1.50 Vegetables<br>Apple      100.00 2.50 Fruit<br>Onion        8.00 0.80 Vegetables<br>Banana      50.00 1.40 Fruit<br>Beef       120.00 22.00 Meat<br>Rice        40.00 10.00 Staple</p>
<p>First, it needs to be clear that Awk has these stir-fry modes. If you’ve seen “Awk’s Origin - Starting with a Beauty Choosing a Boyfriend,” you should feel a sense of déjà vu.<br>BEGIN {statements}<br>Before input is read, statements execute once - no matter if you’re stir-frying or boiling, no matter if it’s fish or meat, wash it first! Prepare oil, salt, sauce, vinegar bowls, it has nothing to do with your stir-frying!<br>END {statements}<br>After all input is read, statements execute once - old saying, whether you’re full or not, pay up!<br>expression {statements}<br>Every time an input line is encountered where the judgment expression is true, statements execute the cooking process once. expression is true when its value is non-zero or non-empty - just check if you added salt, if there’s too much oil? 70% done or 80% done?<br>/regular expression/ {statements}<br>When an input line matching the regular expression is encountered, statements execute: the input line contains a string that can be matched by regular expression. In one sentence, honestly follow the recipe. If hair or cockroach droppings are found in the dish, you’re dead!<br>compound pattern {statements}<br>Multiple patterns, &amp;&amp;(AND), ||(OR), !(NOT), and parentheses combined. When compound pattern is true, statements execute. You can stir-fry + add vinegar, or bake, but don’t give me half-cooked stuff.<br>pattern_1, pattern_2 {statements}<br>A range pattern matches multiple input lines, from pattern1 to pattern_2 (including these two lines), executing statements operations on each line. Your moment to show off might be after starting the fire and before starting the pot. This time period is your performance moment.</p>
<p>You can write down your 72 stir-fry methods and put them in the cooking secret book,<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>BEGIN {<br>      printf(“%-10s %s %s %s\n”,<br>          “Name”, “Weight”, “Unit Price”, “Category”)<br>      }<br>      { printf(“%-10s %6.2f %6.2f %s\n”, $1, $2, $3, $4)<br>        weight = weight + $2<br>        price  = price + $3*$2<br>      }<br>END   { printf(“\n%10s %6.2f %6.2f\n”, “Total: “, weight, price)<br>      }%</p>
<p>Next time, pass it to the one-in-a-million martial arts genius, directly call</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>➜  tmp awk -f cooking radish.data<br>Name         Weight Unit Price Category<br>Fish        30.00   8.50 Meat<br>Radish      14.00   1.20 Vegetables<br>Cabbage     24.00   1.50 Vegetables<br>Apple      100.00   2.50 Fruit<br>Onion        8.00   0.80 Vegetables<br>Banana      50.00   1.40 Fruit<br>Beef       120.00  22.00 Meat<br>Rice        40.00  10.00 Staple</p>
<pre><code>  Total:  386.00 3674.20
</code></pre>
<p><a href="#Blade-Unsheathed"></a>Blade Unsheathed<br>One army knife blade, cuts down thousands!<br>To know what happens next, stay tuned for my next分解…</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Tips/" rel="tag"># Tips</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2017/02/03/ideas/" rel="prev" title="点子">
                  <i class="fa fa-angle-left"></i> 点子
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2017/04/25/clean-code/" rel="next" title="Clean Code">
                  Clean Code <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
  <div class="languages">
    <label class="lang-select-label">
      <i class="fa fa-language"></i>
      <span>English</span>
      <i class="fa fa-angle-up" aria-hidden="true"></i>
    </label>
    <select class="lang-select" data-canonical="" aria-label="Select language">
      
        <option value="zh-CN" data-href="/2017/04/25/awk-en/" selected="">
          简体中文
        </option>
      
        <option value="en" data-href="/en/2017/04/25/awk-en/" selected="">
          English
        </option>
      
    </select>
  </div>

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Gitvim</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
